import{B as f,G as b,$ as d,a0 as m,Y as p,Z as v,r as u,j as g,a as y,h as x,S as O,a1 as l}from"./index-DKeE9UNj.js";import{n as S,s as w,a as h}from"./apiEndpoints-CaJJsC1L.js";var E=class extends f{#s;#r=void 0;#t;#e;constructor(t,e){super(),this.#s=t,this.setOptions(e),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#s.defaultMutationOptions(t),b(this.options,e)||this.#s.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),e?.mutationKey&&this.options.mutationKey&&d(e.mutationKey)!==d(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#o(t)}getCurrentResult(){return this.#r}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#i(),this.#o()}mutate(t,e){return this.#e=e,this.#t?.removeObserver(this),this.#t=this.#s.getMutationCache().build(this.#s,this.options),this.#t.addObserver(this),this.#t.execute(t)}#i(){const t=this.#t?.state??m();this.#r={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){p.batch(()=>{if(this.#e&&this.hasListeners()){const e=this.#r.variables,o=this.#r.context;t?.type==="success"?(this.#e.onSuccess?.(t.data,e,o),this.#e.onSettled?.(t.data,null,e,o)):t?.type==="error"&&(this.#e.onError?.(t.error,e,o),this.#e.onSettled?.(void 0,t.error,e,o))}this.listeners.forEach(e=>{e(this.#r)})})}};function C(t,e){const o=v(),[s]=u.useState(()=>new E(o,t));u.useEffect(()=>{s.setOptions(t)},[s,t]);const r=u.useSyncExternalStore(u.useCallback(a=>s.subscribe(p.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),c=u.useCallback((a,i)=>{s.mutate(a,i).catch(S)},[s]);if(r.error&&w(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:c,mutateAsync:r.mutate}}const M=x("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=u.forwardRef(({className:t,variant:e,size:o,asChild:s=!1,...r},c)=>{const a=s?O:"button";return g.jsx(a,{className:y(M({variant:e,size:o,className:t})),ref:c,...r})});j.displayName="Button";function K(t,e,o){const{params:s,responseType:r="json"}=o??{},c=()=>r==="blob"||r==="arraybuffer"?{params:s,responseType:r}:{params:s};return C({mutationKey:[t,e,s,r],mutationFn:i=>{const n=c();switch(t){case"post":return h.post(e,i,n);case"put":return h.put(e,i,n);case"delete":return i?.id?h.delete(`${e}/${i.id}`,n):h.delete(e,n);default:throw new Error("Unsupported method")}},onSuccess:i=>{if(r==="json"){const n=i.data;l({title:"Success",description:n?.message??"Operation successful"})}},onError:i=>{const n=i?.response?.data?.message??i.message??"Something went wrong";l({variant:"destructive",title:"Error",description:n})}})}export{j as B,K as u};
